import{r as w,c as y,s as z,E as T,y as ne,z as ue,A as ie,B as O,C as re,D as se,G as q,l as Q,a5 as _,a1 as X,a2 as de,an as ve,a3 as ce,H as K,ak as pe,F as W,I as G,J as fe,K as be,N as Y,P as me,U as ye,ao as k,Q as g,M as $,L as ge,v as xe,o as V,d as D,i as I,q as A,j as he,t as F,g as U,h as E,w as M,f as N,W as Oe,ap as Se,aq as we,m as Z,e as ke}from"./app-1wYJt2nm.js";import{f as Le,c as S,p as Re,u as Ve}from"./use-text-value-BVRjvVgN.js";function De(e,i,o){let x=w(o==null?void 0:o.value),r=y(()=>e.value!==void 0);return[y(()=>r.value?e.value:x.value),function(f){return r.value||(x.value=f),i==null?void 0:i(f)}]}function ee(e={},i=null,o=[]){for(let[x,r]of Object.entries(e))le(o,te(i,x),r);return o}function te(e,i){return e?e+"["+i+"]":i}function le(e,i,o){if(Array.isArray(o))for(let[x,r]of o.entries())le(e,te(i,x.toString()),r);else o instanceof Date?e.push([i,o.toISOString()]):typeof o=="boolean"?e.push([i,o?"1":"0"]):typeof o=="string"?e.push([i,o]):typeof o=="number"?e.push([i,`${o}`]):o==null?e.push([i,""]):ee(o,i,e)}function Ce(e,i){return e===i}var Te=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Te||{}),Pe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Pe||{}),je=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(je||{});function Be(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let ae=Symbol("ListboxContext");function H(e){let i=me(ae,null);if(i===null){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,H),o}return i}let Ie=z({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ce},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:i,attrs:o,emit:x}){let r=w(1),f=w(null),t=w(null),b=w(null),c=w([]),m=w(""),v=w(null),l=w(1);function u(a=n=>n){let n=v.value!==null?c.value[v.value]:null,s=ye(a(c.value.slice()),h=>O(h.dataRef.domRef)),p=n?s.indexOf(n):null;return p===-1&&(p=null),{options:s,activeOptionIndex:p}}let d=y(()=>e.multiple?1:0),[L,R]=De(y(()=>e.modelValue),a=>x("update:modelValue",a),y(()=>e.defaultValue)),P=y(()=>L.value===void 0?T(d.value,{1:[],0:void 0}):L.value),C={listboxState:r,value:P,mode:d,compare(a,n){if(typeof e.by=="string"){let s=e.by;return(a==null?void 0:a[s])===(n==null?void 0:n[s])}return e.by(a,n)},orientation:y(()=>e.horizontal?"horizontal":"vertical"),labelRef:f,buttonRef:t,optionsRef:b,disabled:y(()=>e.disabled),options:c,searchQuery:m,activeOptionIndex:v,activationTrigger:l,closeListbox(){e.disabled||r.value!==1&&(r.value=1,v.value=null)},openListbox(){e.disabled||r.value!==0&&(r.value=0)},goToOption(a,n,s){if(e.disabled||r.value===1)return;let p=u(),h=Le(a===S.Specific?{focus:S.Specific,id:n}:{focus:a},{resolveItems:()=>p.options,resolveActiveIndex:()=>p.activeOptionIndex,resolveId:B=>B.id,resolveDisabled:B=>B.dataRef.disabled});m.value="",v.value=h,l.value=s??1,c.value=p.options},search(a){if(e.disabled||r.value===1)return;let n=m.value!==""?0:1;m.value+=a.toLowerCase();let s=(v.value!==null?c.value.slice(v.value+n).concat(c.value.slice(0,v.value+n)):c.value).find(h=>h.dataRef.textValue.startsWith(m.value)&&!h.dataRef.disabled),p=s?c.value.indexOf(s):-1;p===-1||p===v.value||(v.value=p,l.value=1)},clearSearch(){e.disabled||r.value!==1&&m.value!==""&&(m.value="")},registerOption(a,n){let s=u(p=>[...p,{id:a,dataRef:n}]);c.value=s.options,v.value=s.activeOptionIndex},unregisterOption(a){let n=u(s=>{let p=s.findIndex(h=>h.id===a);return p!==-1&&s.splice(p,1),s});c.value=n.options,v.value=n.activeOptionIndex,l.value=1},theirOnChange(a){e.disabled||R(a)},select(a){e.disabled||R(T(d.value,{0:()=>a,1:()=>{let n=k(C.value.value).slice(),s=k(a),p=n.findIndex(h=>C.compare(s,k(h)));return p===-1?n.push(s):n.splice(p,1),n}}))}};ne([t,b],(a,n)=>{var s;C.closeListbox(),ue(n,ie.Loose)||(a.preventDefault(),(s=O(t))==null||s.focus())},y(()=>r.value===0)),re(ae,C),se(y(()=>T(r.value,{0:q.Open,1:q.Closed})));let j=y(()=>{var a;return(a=O(t))==null?void 0:a.closest("form")});return Q(()=>{_([j],()=>{if(!j.value||e.defaultValue===void 0)return;function a(){C.theirOnChange(e.defaultValue)}return j.value.addEventListener("reset",a),()=>{var n;(n=j.value)==null||n.removeEventListener("reset",a)}},{immediate:!0})}),()=>{let{name:a,modelValue:n,disabled:s,form:p,...h}=e,B={open:r.value===0,disabled:s,value:P.value};return X(W,[...a!=null&&P.value!=null?ee({[a]:P.value}).map(([J,oe])=>X(de,ve({features:ce.Hidden,key:J,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:p,name:J,value:oe}))):[],K({ourProps:{},theirProps:{...o,...pe(h,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:B,slots:i,attrs:o,name:"Listbox"})])}}}),$e=z({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:i,slots:o,expose:x}){var r;let f=(r=e.id)!=null?r:`headlessui-listbox-button-${G()}`,t=H("ListboxButton");x({el:t.buttonRef,$el:t.buttonRef});function b(l){switch(l.key){case g.Space:case g.Enter:case g.ArrowDown:l.preventDefault(),t.openListbox(),$(()=>{var u;(u=O(t.optionsRef))==null||u.focus({preventScroll:!0}),t.value.value||t.goToOption(S.First)});break;case g.ArrowUp:l.preventDefault(),t.openListbox(),$(()=>{var u;(u=O(t.optionsRef))==null||u.focus({preventScroll:!0}),t.value.value||t.goToOption(S.Last)});break}}function c(l){switch(l.key){case g.Space:l.preventDefault();break}}function m(l){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),$(()=>{var u;return(u=O(t.buttonRef))==null?void 0:u.focus({preventScroll:!0})})):(l.preventDefault(),t.openListbox(),Be(()=>{var u;return(u=O(t.optionsRef))==null?void 0:u.focus({preventScroll:!0})})))}let v=fe(y(()=>({as:e.as,type:i.type})),t.buttonRef);return()=>{var l,u;let d={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{...L}=e,R={ref:t.buttonRef,id:f,type:v.value,"aria-haspopup":"listbox","aria-controls":(l=O(t.optionsRef))==null?void 0:l.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(u=O(t.labelRef))==null?void 0:u.id,f].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:b,onKeyup:c,onClick:m};return K({ourProps:R,theirProps:L,slot:d,attrs:i,slots:o,name:"ListboxButton"})}}}),Ae=z({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:i,slots:o,expose:x}){var r;let f=(r=e.id)!=null?r:`headlessui-listbox-options-${G()}`,t=H("ListboxOptions"),b=w(null);x({el:t.optionsRef,$el:t.optionsRef});function c(l){switch(b.value&&clearTimeout(b.value),l.key){case g.Space:if(t.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),t.search(l.key);case g.Enter:if(l.preventDefault(),l.stopPropagation(),t.activeOptionIndex.value!==null){let u=t.options.value[t.activeOptionIndex.value];t.select(u.dataRef.value)}t.mode.value===0&&(t.closeListbox(),$(()=>{var u;return(u=O(t.buttonRef))==null?void 0:u.focus({preventScroll:!0})}));break;case T(t.orientation.value,{vertical:g.ArrowDown,horizontal:g.ArrowRight}):return l.preventDefault(),l.stopPropagation(),t.goToOption(S.Next);case T(t.orientation.value,{vertical:g.ArrowUp,horizontal:g.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),t.goToOption(S.Previous);case g.Home:case g.PageUp:return l.preventDefault(),l.stopPropagation(),t.goToOption(S.First);case g.End:case g.PageDown:return l.preventDefault(),l.stopPropagation(),t.goToOption(S.Last);case g.Escape:l.preventDefault(),l.stopPropagation(),t.closeListbox(),$(()=>{var u;return(u=O(t.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case g.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(t.search(l.key),b.value=setTimeout(()=>t.clearSearch(),350));break}}let m=be(),v=y(()=>m!==null?(m.value&q.Open)===q.Open:t.listboxState.value===0);return()=>{var l,u;let d={open:t.listboxState.value===0},{...L}=e,R={"aria-activedescendant":t.activeOptionIndex.value===null||(l=t.options.value[t.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(u=O(t.buttonRef))==null?void 0:u.id,"aria-orientation":t.orientation.value,id:f,onKeydown:c,role:"listbox",tabIndex:0,ref:t.optionsRef};return K({ourProps:R,theirProps:L,slot:d,attrs:i,slots:o,features:Y.RenderStrategy|Y.Static,visible:v.value,name:"ListboxOptions"})}}}),Ee=z({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:i,attrs:o,expose:x}){var r;let f=(r=e.id)!=null?r:`headlessui-listbox-option-${G()}`,t=H("ListboxOption"),b=w(null);x({el:b,$el:b});let c=y(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===f:!1),m=y(()=>T(t.mode.value,{0:()=>t.compare(k(t.value.value),k(e.value)),1:()=>k(t.value.value).some(a=>t.compare(k(a),k(e.value)))})),v=y(()=>T(t.mode.value,{1:()=>{var a;let n=k(t.value.value);return((a=t.options.value.find(s=>n.some(p=>t.compare(k(p),k(s.dataRef.value)))))==null?void 0:a.id)===f},0:()=>m.value})),l=Re(b),u=y(()=>({disabled:e.disabled,value:e.value,get textValue(){return l()},domRef:b}));Q(()=>t.registerOption(f,u)),ge(()=>t.unregisterOption(f)),Q(()=>{_([t.listboxState,m],()=>{t.listboxState.value===0&&m.value&&T(t.mode.value,{1:()=>{v.value&&t.goToOption(S.Specific,f)},0:()=>{t.goToOption(S.Specific,f)}})},{immediate:!0})}),xe(()=>{t.listboxState.value===0&&c.value&&t.activationTrigger.value!==0&&$(()=>{var a,n;return(n=(a=O(b))==null?void 0:a.scrollIntoView)==null?void 0:n.call(a,{block:"nearest"})})});function d(a){if(e.disabled)return a.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),$(()=>{var n;return(n=O(t.buttonRef))==null?void 0:n.focus({preventScroll:!0})}))}function L(){if(e.disabled)return t.goToOption(S.Nothing);t.goToOption(S.Specific,f)}let R=Ve();function P(a){R.update(a)}function C(a){R.wasMoved(a)&&(e.disabled||c.value||t.goToOption(S.Specific,f,0))}function j(a){R.wasMoved(a)&&(e.disabled||c.value&&t.goToOption(S.Nothing))}return()=>{let{disabled:a}=e,n={active:c.value,selected:m.value,disabled:a},{value:s,disabled:p,...h}=e,B={id:f,ref:b,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":m.value,disabled:void 0,onClick:d,onFocus:L,onPointerenter:P,onMouseenter:P,onPointermove:C,onMousemove:C,onPointerleave:j,onMouseleave:j};return K({ourProps:B,theirProps:h,slot:n,attrs:o,slots:i,name:"ListboxOption"})}}});function Me(e,i){return V(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}const Ne=["for"],ze={key:0},Fe={class:"relative"},Ue={class:"block truncate capitalize"},qe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ke={key:0},He={key:0,class:"mt-1"},Ge=z({__name:"SelectInput",props:{id:{type:String,default:""},label:{type:String,default:""},keyLabel:{type:String,default:"name"},keyValue:{type:String,default:"name"},placeholder:{type:String,default:""},required:{type:Boolean,default:()=>!1},errors:{type:Array,default:()=>[]},readOnly:{type:Boolean,default:()=>!1},wrapperClass:{type:[String,Object,Array],default:""},buttonClass:{type:[String,Object,Array],default:""},labelClass:{type:[String,Object,Array],default:""},inputClass:{type:[String,Object,Array],default:""},items:{type:Object,required:!0},modelValue:{type:[String,Boolean,Number,Object,null],default:null},value:{type:[String,Boolean,Number,Object,null],default:null},dropdownDirection:{type:String,default:"bottom"},search:{type:Boolean,default:()=>!1}},emits:["update:model-value","change"],setup(e,{emit:i}){const o=e,x=i,r=y(()=>o.items.some(l=>typeof l=="object")),f=y(()=>{let l=b.value;return l&&v(l)?l[o.keyLabel]:l&&r.value?o.items.find(u=>u[o.keyValue]===l)[o.keyLabel]:!l&&o.placeholder?o.placeholder:l||null}),t=y(()=>c.value?o.items.filter(({name:l})=>l.toLowerCase().includes(c.value.toLowerCase())):o.items),b=w(o.modelValue||o.value),c=w(""),m=l=>{x("update:model-value",v(l)?l[o.keyValue]:l)},v=l=>typeof l=="object";return(l,u)=>(V(),D("div",null,[I("div",{class:A(e.wrapperClass)},[e.label?(V(),D("label",{key:0,class:A(["text-xs block font-semibold mb-1",[{"":e.readOnly},e.labelClass]]),for:e.id},[he(F(e.label),1),e.required?(V(),D("span",ze,"*")):U("",!0)],10,Ne)):U("",!0),E(N(Ie),{modelValue:b.value,"onUpdate:modelValue":[u[1]||(u[1]=d=>b.value=d),m],as:"div",class:"min-w-16 cursor-pointer",by:v(b.value)||r.value?e.keyValue:void 0,disabled:e.readOnly},{default:M(()=>[I("div",Fe,[E(N($e),{class:A(["relative w-full bg-white py-2 px-2 rounded text-left outline-none text-sm border border-form-border text-slate-800 min-h-[35px]",[e.errors.length&&"border-red-500",e.readOnly&&"opacity-80 !bg-slate-50 cursor-not-allowed",!e.readOnly&&"focus:border-gray-900",e.buttonClass]])},{default:M(()=>[I("span",Ue,F(f.value),1),I("span",qe,[E(N(Me),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1},8,["class"]),E(Oe,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[E(N(Ae),{class:A(["absolute max-h-60 border w-full overflow-auto rounded-md bg-white z-[5] outline-none text-sm",[e.dropdownDirection==="bottom"?"bottom-10 md:bottom-auto md:top-10":"bottom-10"]])},{default:M(()=>[e.search?(V(),D("div",Ke,[Se(I("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>c.value=d),class:"w-full rounded border border-form-border px-2 py-2 outline-none text-sm read-only:border-gray-200 read-only:text-gray-500 read-only:cursor-not-allowed block autofill:!bg-white transition-all bg-white text-slate-800",placeholder:"Search"},null,512),[[we,c.value]])])):U("",!0),(V(!0),D(W,null,Z(t.value,d=>(V(),ke(N(Ee),{key:v(b.value)||r.value?d[e.keyValue]:d,value:d,as:"template"},{default:M(({active:L})=>[I("li",{class:A([v(d)&&d[e.keyValue]===e.modelValue||d===e.modelValue?"bg-primary text-white":"text-gray-900 hover:bg-primary hover:text-white",L?"bg-primary text-white":"!bg-white !text-gray-900","relative select-none p-2 capitalize border-b outline-none"])},F(v(d)||r.value?d[e.keyLabel]:d),3)]),_:2},1032,["value"]))),128))]),_:1},8,["class"])]),_:1})])]),_:1},8,["modelValue","by","disabled"])],2),e.errors.length?(V(),D("div",He,[(V(!0),D(W,null,Z(e.errors,d=>(V(),D("p",{key:d,class:"text-red-500 block text-xs"},F(d),1))),128))])):U("",!0)]))}});export{Ge as _};
